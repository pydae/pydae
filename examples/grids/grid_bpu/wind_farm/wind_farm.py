# -*- coding: utf-8 -*-
"""
Created on Fri Aug 28 18:14:13 2020

@author: jmmau
"""

import numpy as np
from grid_wind_farm import grid_wind_farm_class



syst = grid_wind_farm_class()




u_load = {'p_W1lv_a': 2e6/3,
          'p_W1lv_b': 2e6/3,
          'p_W1lv_c': 2e6/3,
          'p_W2lv_a': 2e6/3,
          'p_W2lv_b': 2e6/3,
          'p_W2lv_c': 2e6/3,
          'p_W3lv_a': 2e6/3,
          'p_W3lv_b': 2e6/3,
          'p_W3lv_c': 2e6/3,}

u_load_0={'p_W1lv_a': 0e3,
          'p_W1lv_b': 0e3,
          'p_W1lv_c': 0e3,
          'p_W2lv_a': 0e3,
          'p_W2lv_b': 0e3,
          'p_W2lv_c': 0e3,
          'p_W3lv_a': 0e3,
          'p_W3lv_b': 0e3,
          'p_W3lv_c': 0e3,}

xy_0 = np.array([0,326.3304269156391, 244.7300166373421, -375.10762493690123, 160.24543141353894,
 48.777198020424166, -404.9754480578464, 326.2926676640905, 244.58086645209994,
 -374.9595774617275, 160.28730603511383, 48.66690979677745, -404.8681724941547,
 326.2162106561469, 244.28280205560583, -374.6632176184269, 160.37012452223036,
 48.447006961377056, -404.652926584728, 11694.03547825341, 845.5664330049682,
 -6579.299750687605, 9704.548580399627, -5114.7357275652375, -10550.115013405722,
 32900.08869612399, 20138.74696556045, -33890.71082063511, 18422.939114797446,
 990.6221245111169, -38561.686080357904, 11713.578153613382, 865.6216634870383,
 -6606.439427443964, 9711.445418477502, -5107.138726168835, -10577.067081965677,
 11710.331430462824, 862.2699116135514, -6601.9133635990365, 9710.309549686926,
 -5108.418066863202, -10572.57946130161, 11703.818356854073, 855.5849879320484,
 -6592.86751306407, 9708.01152432603, -5110.950843789426, -10563.596512259206,
 1307.536718965917, 980.581193584437, -1502.97658395443, 642.0694183675264,
 195.43986438351925, -1622.650611979474, 1308.1529636532887, 980.5589078822762,
 -1503.2654063122548, 642.6142447732956, 195.11244205574357, -1623.1731526808867,
 1309.3866578685129, 980.5173007486828, -1503.8462205818892, 643.7034588719275,
 194.45956211371308, -1624.220759641535, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0])

syst.xy_prev = xy_0
syst.initialization_tol = 1e-10
syst.initialize([u_load],xy0='prev')

events = [
    {'t_end':1.0},
    {'t_end':2.0},
          ]
#syst.run(events)